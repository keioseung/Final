{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState, useCallback } from 'react';\nimport { login as apiLogin, logout as apiLogout, getMe } from '../api/auth';\nexport function useAuth() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const fetchMe = useCallback(async () => {\n    setLoading(true);\n    try {\n      const me = await getMe();\n      setUser(me);\n      setError('');\n    } catch (e) {\n      setUser(null);\n      setError('');\n    }\n    setLoading(false);\n  }, []);\n  useEffect(() => {\n    fetchMe();\n  }, [fetchMe]);\n  const login = async (username, password) => {\n    setLoading(true);\n    try {\n      await apiLogin(username, password);\n      await fetchMe();\n      setError('');\n    } catch (e) {\n      var _e$response, _e$response$data;\n      setError((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.detail) || '로그인 실패');\n    }\n    setLoading(false);\n  };\n  const logout = () => {\n    apiLogout();\n    setUser(null);\n  };\n  return {\n    user,\n    isAdmin: (user === null || user === void 0 ? void 0 : user.role) === 'admin',\n    isLoggedIn: !!user,\n    loading,\n    error,\n    login,\n    logout,\n    refetch: fetchMe\n  };\n}\n_s(useAuth, \"AFr882K+PcEIVdm3t7Yx2YsSz9M=\");","map":{"version":3,"names":["useEffect","useState","useCallback","login","apiLogin","logout","apiLogout","getMe","useAuth","_s","user","setUser","loading","setLoading","error","setError","fetchMe","me","e","username","password","_e$response","_e$response$data","response","data","detail","isAdmin","role","isLoggedIn","refetch"],"sources":["/workspaces/Final/frontend/src/hooks/useAuth.ts"],"sourcesContent":["import { useEffect, useState, useCallback } from 'react';\r\nimport { login as apiLogin, logout as apiLogout, getMe } from '../api/auth';\r\n\r\nexport function useAuth() {\r\n  const [user, setUser] = useState<any>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  const fetchMe = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const me = await getMe();\r\n      setUser(me);\r\n      setError('');\r\n    } catch (e) {\r\n      setUser(null);\r\n      setError('');\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchMe();\r\n  }, [fetchMe]);\r\n\r\n  const login = async (username: string, password: string) => {\r\n    setLoading(true);\r\n    try {\r\n      await apiLogin(username, password);\r\n      await fetchMe();\r\n      setError('');\r\n    } catch (e: any) {\r\n      setError(e?.response?.data?.detail || '로그인 실패');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const logout = () => {\r\n    apiLogout();\r\n    setUser(null);\r\n  };\r\n\r\n  return {\r\n    user,\r\n    isAdmin: user?.role === 'admin',\r\n    isLoggedIn: !!user,\r\n    loading,\r\n    error,\r\n    login,\r\n    logout,\r\n    refetch: fetchMe,\r\n  };\r\n} "],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AACxD,SAASC,KAAK,IAAIC,QAAQ,EAAEC,MAAM,IAAIC,SAAS,EAAEC,KAAK,QAAQ,aAAa;AAE3E,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAM,IAAI,CAAC;EAC3C,MAAM,CAACW,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAEtC,MAAMe,OAAO,GAAGd,WAAW,CAAC,YAAY;IACtCW,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMI,EAAE,GAAG,MAAMV,KAAK,CAAC,CAAC;MACxBI,OAAO,CAACM,EAAE,CAAC;MACXF,QAAQ,CAAC,EAAE,CAAC;IACd,CAAC,CAAC,OAAOG,CAAC,EAAE;MACVP,OAAO,CAAC,IAAI,CAAC;MACbI,QAAQ,CAAC,EAAE,CAAC;IACd;IACAF,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;EAENb,SAAS,CAAC,MAAM;IACdgB,OAAO,CAAC,CAAC;EACX,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEb,MAAMb,KAAK,GAAG,MAAAA,CAAOgB,QAAgB,EAAEC,QAAgB,KAAK;IAC1DP,UAAU,CAAC,IAAI,CAAC;IAChB,IAAI;MACF,MAAMT,QAAQ,CAACe,QAAQ,EAAEC,QAAQ,CAAC;MAClC,MAAMJ,OAAO,CAAC,CAAC;MACfD,QAAQ,CAAC,EAAE,CAAC;IACd,CAAC,CAAC,OAAOG,CAAM,EAAE;MAAA,IAAAG,WAAA,EAAAC,gBAAA;MACfP,QAAQ,CAAC,CAAAG,CAAC,aAADA,CAAC,wBAAAG,WAAA,GAADH,CAAC,CAAEK,QAAQ,cAAAF,WAAA,wBAAAC,gBAAA,GAAXD,WAAA,CAAaG,IAAI,cAAAF,gBAAA,uBAAjBA,gBAAA,CAAmBG,MAAM,KAAI,QAAQ,CAAC;IACjD;IACAZ,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;EAED,MAAMR,MAAM,GAAGA,CAAA,KAAM;IACnBC,SAAS,CAAC,CAAC;IACXK,OAAO,CAAC,IAAI,CAAC;EACf,CAAC;EAED,OAAO;IACLD,IAAI;IACJgB,OAAO,EAAE,CAAAhB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEiB,IAAI,MAAK,OAAO;IAC/BC,UAAU,EAAE,CAAC,CAAClB,IAAI;IAClBE,OAAO;IACPE,KAAK;IACLX,KAAK;IACLE,MAAM;IACNwB,OAAO,EAAEb;EACX,CAAC;AACH;AAACP,EAAA,CAjDeD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}